## Cодержание

1. [Отчет по лабораторной работе № N](#отчет-по-лабораторной-работе--n)

## Отчет по лабораторной работе № 3

#### № группы: `ПМ-2402`

#### Выполнил: `Корень Егор Романович`

#### Вариант: `13`

### Cодержание:

- [Постановка задачи](#1-постановка-задачи)
- [Классы](#5-программа)
- [Анализ правильности решения](#6-анализ-правильности-решения)

### 1. Постановка задачи

> Игра в крестики-нолики
Краткое описание
Разработать программу для классической игры «Крестики-нолики» для двух игроков.
Реализовать функционал создания игрового поля, обработки ходов игроков, проверки
текущего состояния игры и определения победителя.

### 2. Классы
Мною было решено разбить программу на 3 класса: Filed, Player, Game

#### Класс Player
Данный класс хранит в себе данные о игроке

Поля класса:
1. `name` - хранит имя игрока
2. `moves` - хранит количество ходов игрока
3. `isWinner` - хранит значение true/false является ли игрок победителем

Методы класса:
1. Стандартные геттеры, сеттеры
2. `increaseMoves` - увеличивает поле `moves` на 1
3. `reset` - сбрасывает все поля в исходные значения, в качестве аргумента принимает новое имя пользователя.

Код класса:
```java
class Player{
    private String name;
    private int moves; // количество совершенных ходов
    private boolean isWinner; // победитель ли игрок

    public Player(String name){
        this.name = name;
        this.moves = 0;
        this.isWinner = false;
    }

    public boolean getIsWinner(){
        return this.isWinner;
    }

    public void setIsWinner(boolean value){
        this.isWinner = value;
    }

    public int getMoves(){
        return moves;
    }
    public String getName(){
        return this.name;
    }

    // увеличивает количество ходов на 1
    public void increaseMoves(){
        this.moves++;
    }

    // сброс пользователя
    public void reset(String name){
        this.name = name;
        this.moves = 0;
        this.isWinner = false;
    }
}
```

#### Класс Field
Данный класс содержит основную информацию об игровом поле и методы для обработки ходов. Конструктор принимает на вход 2 объекта класса Player

Поля класса:
1. `field` - двумерный массив, хранящий значения клеток: 0 - пустая клетка, -1 - x, 1 - o
2. `player1` и `player2` - объекты класса Player, хранящие информацию об игроке

Методы:

1. `toString` - переопределенный метод для корректного вывода на экран объектов класса `Field`
2. `currentPlayer` - возвращает имя игрока, который делает следующий ход. Сравнивает количество совершенных игроками ходов: если у первого игрока ходов меньше или равно второму, то ходит он, иначе другой.
3. `move` - обработка хода. Используются 2 цикла для того, чтобы получить корректный ввод координат от пользователя(координаты внутри поля и клетка не занята), за тем определяет какой игрок совершал ход, увеличивет количество его ходов и меняет значение в данной клеточке.
4. `defineWinner` - определение победителя, просматриваются все значения(2 диагонали, все столбцы и строки). Исходя из суммы определяется победил ли кто-то на данный момент или нет.
5. `checkWinner` - определяет является ли игрок с переданным номером победителем.
6. `isTie` - возвращает значение true/false. определяет ничья ли сейчас. Проверка осуществляется проходясь по всем клеткам поля. Если все клетки заняты, но ни один пользователь не победил, то ничья, иначе нет.
7. `isContinue` - проверяет находится ли игра в процессе. Если не ничья и ни один из игроков не победил, то игра находится в процессе.
8. `currentSituation` - возвращает в строковом формате текущее состояние игры.
9. `clearField` - метод, очищающий полностью поле и спрашивающий у пользователя желает ли он сохранить имена пользователей. Если имена остаются, то у каждого объекта класса `Player` вызывает метод `reset` с параметром имени пользователя, если имена изменяются, то вызывает метод `reset`  запрашивает у пользователя новые имена.

Код класса:
```java
// класс поля
class Field{
    Scanner in = new Scanner(System.in);
    private int[][] field; // двумерный массив, в котором хранятся все значения: 0 - пустая клетка, -1 - x, 1 - o
    private Player player1;
    private Player player2;

    // при создании на вход принимает 2 объекта класса игрок
    public Field(Player p1, Player p2){
        this.field = new int[3][3];
        this.player1 = p1;
        this.player2 = p2;
    }

    @Override
    public String toString(){
        String s = "";
        // вывод имен пользователей с их знаком
        s += player1.getName() + " - o\n" + player2.getName() + " - x\n";

        // формирование таблички 3x3 для вывода
        for (int i = 0; i < this.field.length; i++){
            s += "|";
            for (int j = 0; j < this.field.length; j++){String t;
                // 1 заменяем на щ
                if (this.field[i][j] == 1)
                    t = "o";

                    // -1 заменяем на x
                else if(this.field[i][j] == -1)
                    t = "x";
                    // иначе на -
                else
                    t = "-";
                s += " " + t + " |";
            }
            s += "\n"; // перходим к новой строке таблички
        }
        return s;
    }

    // возвращает имя игрока, который делает ход
    public String currentPlayer(){
        // если количество совершенных ходов у первого игрока меньше или равно количеству ходов второго, то ходит первый
        if (this.player1.getMoves() <= this.player2.getMoves())
            return this.player1.getName();
            // иначе второй
        else
            return this.player2.getName();
    }

    // метод, совершающий ход
    public void move(){
        int x;
        int y;
        // 2 цикла т.к сначала нужно сначала проверить то, что координаты не выходят за границы поля и только потом проверить то, что клетка пустая
        //пользователь вводит координаты пока не введет их еоректно
        do{
            do{
                System.out.println("Введите корректные координаты клетки");
                x = in.nextInt();
                y = in.nextInt();
            }while(!(x >= 1 && x <= 3 && y >= 1 && y <= 3));
        }while(this.field[y - 1][x - 1] != 0);
        // проверка того, кто сейчас ходит
        if (this.player1.getMoves() <= this.player2.getMoves()){
            this.field[y - 1][x - 1] = 1; // клеточке присваиваем 1 если ходит первый
            this.player1.increaseMoves(); // увеличиваем количество ходов на 1 у сходившего игрока
        }
        else{
            this.field[y - 1][x - 1] = -1; // иначе присваиваем -1
            this.player2.increaseMoves(); // увеличиваем количество ходов на 1 у сходившего игрока
        }
    }

    // определяет победителя
    public void defineWinner(){
        // проходимся по массиву
        for (int i = 0; i < this.field.length; i++){
            int s1 = 0;
            int s2 = 0;
            for (int j = 0; j < this.field[0].length; j++){
                s1 += this.field[i][j]; // считаем сумму строки
                s2 += this.field[j][i]; // считаем сумму столбца
            }
            // если какая-либо из сумм равна 3, то первый победил
            if (s1 == 3 || s2 == 3)
                this.player1.setIsWinner(true);
            // если какая-либо из сумм равна -3, то первый победил
            if (s1 == -3 || s2 == -3)
                this.player2.setIsWinner(true);
        }
        int s = 0;
        int s2 = 0;
        for (int i = 0; i < this.field.length; i++){
            s += this.field[i][i]; // считаем сумму диагонали из левого верхнего угла
            s2 += this.field[i][this.field.length - 1 - i]; // считаем сумму диагонали из правого верхнего угла
        }
        // если какая-либо из сумм равна 3, то первый победил
        if (s == 3 || s2 == 3)
            this.player1.setIsWinner(true);
        // если какая-либо из сумм равна -3, то первый победил
        if (s == -3 || s2 == -3)
            this.player2.setIsWinner(true);

    }
    // проверяет является ли игрок победителем
    public boolean checkWinner(int number){
        if (this.player1.getIsWinner() && number == 1 || this.player2.getIsWinner() && number == 2)
            return true;
        else
            return false;
    }

    // проверка на ничью
    public boolean isTie(){
        int k = 0;
        // считаем количество пустых клеток
        for (int i = 0; i < this.field.length; i++){
            for (int j = 0; j < this.field[0].length; j++){
                if (this.field[i][j] == 0)
                    k++;
            }
        }
        // если количество пустыъ клеток равно нулю и ни один из игроков не является победителем
        if (k == 0 && !this.player1.getIsWinner() && !this.player2.getIsWinner())
            return true;
        else
            return false;
    }

    // проверка на то, что игра в процессе
    public boolean isContinuing(){
        if (!this.isTie() && !this.checkWinner(1) && !this.checkWinner(2)) // если не ничья и ни один из игроков не победил, то игра в процессе
            return true;
        else
            return false;
    }

    // возвращает текущее состояние игры
    public String currentSituation(){
        String s = "";
        if (isTie()){ // если ничья
            s = "Ничья";
        }
        else if(this.player1.getIsWinner()){ // если первый побеил
            s = "Победитель " + this.player1.getName();
        }
        else if(this.player2.getIsWinner()){ // если второй победил
            s = "Победитель: " + this.player2.getName();
        }
        else{ // иначе
            s = "Игра в процессе";
        }
        return s;
    }

    // очищает игровое поле
    public void clearField(){
        String s;
        in.nextLine();
        do{
            // выбираем хотим ли оставить имена игроков
            System.out.println("Вы хотите оставить имена пользователей? Введите ответ y/n");
            s = in.nextLine();
            // если нет, то сбрасываем методом reset объекты класса player, запрашиваем новые имена
            if (s.equalsIgnoreCase("n")){
                System.out.println("Введите имя 1 игрока");
                this.player1.reset(in.nextLine());
                System.out.println("Введите имя 2 игрока");
                this.player2.reset(in.nextLine());
                this.field = new int[3][3]; // возможно не самый оптимальный вариант с точки зрения расхода памяти, но учитывая что поле 3x3 это допустимо
            }
            // сбрасываем методом reset объекты класса player, но оставляем их имена
            if (s.equalsIgnoreCase("y")){
                this.player1.reset(this.player1.getName());
                this.player2.reset(this.player2.getName());
                this.field = new int[3][3];
            }
        }while (!(s.equalsIgnoreCase("y") || s.equalsIgnoreCase("n")));
    }

}
```
#### Класс Game
Данный класс в конструкторе принимает объект класса `Field`.

Поля:
1. `field` является объектом класса `Field`

Методы:
1. `play` - метод, запускающий саму игру.

Код класса:
```java
class Game{
    Scanner in = new Scanner(System.in);
    private Field fl;

    // в конструктор принимает
    public Game(Field fl){
        this.fl = fl;
    }

    // метод, в котором описывается внутриигровая логика
    public void play(){
        System.out.println(this.fl);
        while (this.fl.isContinuing()){ // пока игра продолжается
            String s;
            do{
                System.out.println("Введите c для продолжения игры, n для начала новой игры (латиница)");
                s = in.nextLine(); // ввод ответа на вопрос
                if (s.equalsIgnoreCase("c")){ // если продолжаем игру
                    if (!this.fl.isContinuing()){ // если игра закончилась
                        System.out.println(this.fl.currentSituation()); // то выводим статус игры
                    }
                    else{ // иначе совершаем ход
                        System.out.println("Ходит " + this.fl.currentPlayer());
                        this.fl.move();
                    }
                    System.out.println(this.fl); // выводим обновленное поле
                    this.fl.defineWinner(); // проверяем победил ли кто-то из игроков
                    System.out.println(this.fl.currentSituation());

                }
                if (s.equalsIgnoreCase("n")) // если начинаем новую игру
                    this.fl.clearField(); // то очищаем поле
                if (!this.fl.isContinuing()){ // если игра закончилась
                    String answer;
                    do{
                        System.out.println("Вы хотите начать игру заново? y/n");
                        answer = in.nextLine();
                    }while(!(answer.equalsIgnoreCase("y") || answer.equalsIgnoreCase("n"))); // то спрашиваем хочет ли начать новую игру
                    if (answer.equalsIgnoreCase("y")){ // если да, то очищаем поле
                        this.fl.clearField();
                    }
                }
            }while(!(s.equalsIgnoreCase("c") || s.equalsIgnoreCase("n")) && this.fl.isContinuing());
        }
    }
}
```

#### Класс Main
```java
import java.util.Scanner;


public class Main {
    public static void main(String[] args) {
        // иннициализация классов
        Scanner in = new Scanner(System.in);
        System.out.println("Введите имя 1 игрока");
        Player p1 = new Player(in.nextLine());
        System.out.println("Введите имя 2 игрока");
        Player p2 = new Player(in.nextLine());
        Field f = new Field(p1, p2);
        Game game = new Game(f);
        game.play();
    }
}
```


### 3 Анализ правильности решения

Так как во время программы пользователь часто осуществляет ввод, будет удобным отобразить ввод вместе с выводом. Перед пользовательским вводом стоит символ ``>``

1. Победа первого заполнением диагонали из левого верхнего угла, ввод имени 1 для первого игрока, 2 игрока. После завершения игры пользователь выбирает начать новую игру без смены имен.

- Input and output:
    ```
    Введите имя 1 игрока
  >1
  Введите имя 2 игрока
  >2
  1 - o
  2 - x
  | - | - | - |
  | - | - | - |
  | - | - | - |
  
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >1
  >1
  1 - o
  2 - x
  | o | - | - |
  | - | - | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 2
  Введите корректные координаты клетки
  >2
  >2
  1 - o
  2 - x
  | o | - | - |
  | - | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >1
  >2
  1 - o
  2 - x
  | o | - | - |
  | o | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 2
  Введите корректные координаты клетки
  >1
  >3
  1 - o
  2 - x
  | o | - | - |
  | o | x | - |
  | x | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >2
  >1
  1 - o
  2 - x
  | o | o | - |
  | o | x | - |
  | x | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 2
  Введите корректные координаты клетки
  >3
  >3
  1 - o
  2 - x
  | o | o | - |
  | o | x | - |
  | x | - | x |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >3
  >1
  1 - o
  2 - x
  | o | o | o |
  | o | x | - |
  | x | - | x |
  
  Победитель 1
  Вы хотите начать игру заново? y/n
  >y
  Вы хотите оставить имена пользователей? Введите ответ y/n
  >y
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >1 1
  1 - o
  2 - x
  | o | - | - |
  | - | - | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)

    ```

2. Победа второго диагональю из правого верхнего угла, смена имен, победа первого строкой, новая игра без смены имен, победа второго столбцом, новая игра без смены имен, ничья, завершение игры.

- Input and output:
    ```
  Введите имя 1 игрока
  >1
  Введите имя 2 игрока
  >2
  1 - o
  2 - x
  | - | - | - |
  | - | - | - |
  | - | - | - |
  
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >1
  >1
  1 - o
  2 - x
  | o | - | - |
  | - | - | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 2
  Введите корректные координаты клетки
  >3
  >1
  1 - o
  2 - x
  | o | - | x |
  | - | - | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >2
  >1
  1 - o
  2 - x
  | o | o | x |
  | - | - | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 2
  Введите корректные координаты клетки
  >2
  >2
  1 - o
  2 - x
  | o | o | x |
  | - | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 1
  Введите корректные координаты клетки
  >1
  >2
  1 - o
  2 - x
  | o | o | x |
  | o | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит 2
  Введите корректные координаты клетки
  >1
  >3
  1 - o
  2 - x
  | o | o | x |
  | o | x | - |
  | x | - | - |
  
  Победитель: 2
  Вы хотите начать игру заново? y/n
  >y
  Вы хотите оставить имена пользователей? Введите ответ y/n
  >n
  Введите имя 1 игрока
  >биба
  Введите имя 2 игрока
  >боба
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит биба
  Введите корректные координаты клетки
  >1
  >1
  биба - o
  боба - x
  | o | - | - |
  | - | - | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит боба
  Введите корректные координаты клетки
  >2
  >2
  биба - o
  боба - x
  | o | - | - |
  | - | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит биба
  Введите корректные координаты клетки
  >2
  >1
  биба - o
  боба - x
  | o | o | - |
  | - | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит боба
  Введите корректные координаты клетки
  >3
  >3
  биба - o
  боба - x
  | o | o | - |
  | - | x | - |
  | - | - | x |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит биба
  Введите корректные координаты клетки
  >3
  >1
  биба - o
  боба - x
  | o | o | o |
  | - | x | - |
  | - | - | x |
  
  Победитель биба
  Вы хотите начать игру заново? y/n
  >y
  Вы хотите оставить имена пользователей? Введите ответ y/n
  >y
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит биба
  Введите корректные координаты клетки
  >1 1
  биба - o
  боба - x
  | o | - | - |
  | - | - | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит боба
  Введите корректные координаты клетки
  >2 2
  биба - o
  боба - x
  | o | - | - |
  | - | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит биба
  Введите корректные координаты клетки
  >2
  >1
  биба - o
  боба - x
  | o | o | - |
  | - | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит боба
  Введите корректные координаты клетки
  >3
  >1
  биба - o
  боба - x
  | o | o | x |
  | - | x | - |
  | - | - | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит биба
  Введите корректные координаты клетки
  >2
  >3
  биба - o
  боба - x
  | o | o | x |
  | - | x | - |
  | - | o | - |
  
  Игра в процессе
  Введите c для продолжения игры, n для начала новой игры (латиница)
  >c
  Ходит боба
  Введите корректные координаты клетки
  >1
  >3
  биба - o
  боба - x
  | o | o | x |
  | - | x | - |
  | x | o | - |
  
  Победитель: боба
  Вы хотите начать игру заново? y/n
  >n
    ```
  
3. Ничья
- Input and output
```
Введите имя 1 игрока
>1
Введите имя 2 игрока
>2
1 - o
2 - x
| - | - | - |
| - | - | - |
| - | - | - |

Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 1
Введите корректные координаты клетки
>2
>2
1 - o
2 - x
| - | - | - |
| - | o | - |
| - | - | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 2
Введите корректные координаты клетки
>1
>1
1 - o
2 - x
| x | - | - |
| - | o | - |
| - | - | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 1
Введите корректные координаты клетки
>2 3
1 - o
2 - x
| x | - | - |
| - | o | - |
| - | o | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 2
Введите корректные координаты клетки
>2
>1
1 - o
2 - x
| x | x | - |
| - | o | - |
| - | o | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 1
Введите корректные координаты клетки
>3
>1
1 - o
2 - x
| x | x | o |
| - | o | - |
| - | o | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 2
Введите корректные координаты клетки
>1
>3
1 - o
2 - x
| x | x | o |
| - | o | - |
| x | o | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 1
Введите корректные координаты клетки
>1
>2
1 - o
2 - x
| x | x | o |
| o | o | - |
| x | o | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 2
Введите корректные координаты клетки
>3
>2
1 - o
2 - x
| x | x | o |
| o | o | x |
| x | o | - |

Игра в процессе
Введите c для продолжения игры, n для начала новой игры (латиница)
>c
Ходит 1
Введите корректные координаты клетки
>3
>3
1 - o
2 - x
| x | x | o |
| o | o | x |
| x | o | o |

Ничья
Вы хотите начать игру заново? y/n
>n
```
